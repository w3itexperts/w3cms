var serializedelementData="";function removeEditorElement(){jQuery(".ME-DeleteElement").unbind().on("click",(function(){jQuery(this).attr("elementid");var e=jQuery(this).parents(".me-element-item");updateShortCode(jQuery(this).index(".ME-DeleteElement")),e.remove(),addRemoveAddElementBtn()}))}function addRemoveAddElementBtn(){setTimeout((function(){jQuery(".me-element-item").length>0?jQuery(".me-add-element-btn").hide():jQuery(".me-add-element-btn").show()}),500)}function objectifyForm(e){for(var t="[",a=0;a<e.length;a++){var n=e.length==a+1?" ":", ";"element_id"==e[a].name?t+=e[a].value+" ":t+=e[a].name+"="+e[a].value+n}return t+="]"}const escapeHtml=e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");function getSubShortCode(e){var t=i="";return $.each(e,(function(a,n){var r=Object.keys(e).length-1==i?'"':'",';n&&(t+='"'+a+'":"'+encodeURIComponent(n)+r,i++)})),"{"+(t=t.replace(/^,|,$/g,""))+"}"}function getShortCode(e){var t="<%ME-EL%>",a="",n=0;return $.each(e,(function(r,l){var o=Object.keys(e).length-1==n?'"':'"'+t;if("element_id"==r)a+=l+t;else if(Array.isArray(l)&&"object"==typeof l[0]){var i=0;$.each(l,(function(e,n){var s=Object.keys(l).length-1==i?o:'"'+t;a+=r+'="'+getSubShortCode(n)+s,i++}))}else""!=l&&(a+=r+'="'+encodeURIComponent(l)+o);n++})),"["+a+"]"}function saveElementSettings(){jQuery("#BlogAdminAddSectionForm").unbind().on("submit",(function(e){e.preventDefault();var t=new FormData(this),a=t.get("element_index");$.ajax({url:$(this).attr("action"),type:"POST",data:t,dataType:"json",contentType:!1,cache:!1,processData:!1,success:function(e){jQuery(".Me-EditElement:eq("+a+")").attr("element-form-data",e.data),delete(e=JSON.parse(e.data))._token,e=getShortCode(e),updateShortCode(a,e),jQuery("#AjaxModalBoxMd").modal("hide")}})}))}function getEditorValue(e){return $("<textarea/>").html(CKEDITOR.instances[e].getData()).val()}function setEditorValue(e,t=""){return CKEDITOR.instances[e].setData(t)}function updateShortCode(e,t=""){var a="<%ME%>",n="PageContent",r=getEditorValue(n).split(a);r=r.filter((function(e,t){return null!=e&&""!=e})).map((function(e,t){return e})),""!=t&&null!=t?r.splice(e,1,t):r.splice(e,1),setEditorValue(n,r=r.join(a))}function elementDependencyAjax(){jQuery(".ME-UpdateAjax").unbind().on("change",(function(){event.preventDefault();var e=jQuery(this).val(),t=jQuery(this).attr("me-link"),a=null;jQuery(this).is("[me-result-box]")&&(a=jQuery(this).attr("me-result-box")),jQuery.ajax({type:"POST",url:t,data:{data:e},success:function(e){null!=a&&(jQuery("#"+a).html(e),elementDependencyAjax())},error:function(e){alert("Sorry! There is some problem. please check function calling.")}})}))}function meTabs(){jQuery(".ME-Tabs").on("click",(function(){var e=jQuery(this).attr("rel");jQuery(".ME-TabsContent").hide(),jQuery("#"+e).show()}))}function depend_element(){jQuery(".element-depend").off("keyup change").on("keyup change",(function(){var element_id=jQuery("#element_id").val(),el_name=jQuery(this).attr("name"),el_value=jQuery(this).val(),el_type=jQuery(this).attr("type");if(null!=jQuery(this).data("ajax_container")&&null!=jQuery(this).data("ajax_url")){var ajax_container=jQuery(this).data("ajax_container"),ajax_url=jQuery(this).data("ajax_url"),param_name=ajax_container.replace("Container","");jQuery.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"Post",url:ajax_url,data:{element_id:element_id,content:el_value,param_name:param_name,elementData:serializedelementData},success:function(e){jQuery("#"+ajax_container).length>0&&jQuery("#"+ajax_container).html(e)}})}"checkbox"==el_type&&(el_value=$('input[name="'+el_name+'"]:checked').map((function(){return $(this).val()})).get()),-1!==el_name.indexOf("[]")&&(el_name=el_name.replace("[]",""));var depend_el_common_class=el_name+"-depend";if(jQuery("."+depend_el_common_class).hide(),""==el_value)return!1;if(null==jQuery("."+depend_el_common_class).data(el_name+"-value"))jQuery("."+depend_el_common_class).hide(),jQuery("."+depend_el_common_class).removeClass("d-none").show();else{var firstOperent="string"==typeof el_value?'"'+el_value+'"':el_value;jQuery("."+depend_el_common_class).each((function(e){secondOperator=jQuery(this).data(el_name+"-operator"),secondOperent=jQuery(this).data(el_name+"-value"),secondOperent='"'+secondOperent+'"',"object"==typeof el_value?(depend_el_common_class=jQuery(this),$.each(el_value,(function(index,value){firstOperent='"'+value+'"',eval(firstOperent+secondOperator+secondOperent)&&jQuery(depend_el_common_class).removeClass("d-none").show()}))):eval(firstOperent+secondOperator+secondOperent)&&jQuery(this).removeClass("d-none").show()}))}return!0}))}function addMoreSection(e=0){var t=jQuery(".CustomizeSection:first").clone().appendTo("#CustomizeSectionWapper").show();t.find("input").val(""),t.find("textarea").val(""),jQuery(".CustomizeSection:first").hide(),t=(t=(t=jQuery(".CustomizeSection:first").html()).replace(/%KEY%/g,e)).replace(/data-bsx/g,"data-bs"),jQuery(".CustomizeSection:last").html(t)}function addMoreSectionClick(){jQuery(".addMoreElementSection").on("click",(function(){addMoreSection(jQuery(".CustomizeSection").length-1),removeParamGroupSection()}))}function removeParamGroupSection(){jQuery(".ParamGroupSection i.fa-close").on("click",(function(){jQuery(this).closest(".ParamGroupSection").remove()}))}function removeImageSection(){jQuery("a.RemoveElementImage").on("click",(function(){event.preventDefault();var e=jQuery(this),t=e.attr("rel"),a=e.attr("val"),n=jQuery("#"+t).val();jQuery.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:jQuery(this).attr("href"),data:{imageName:a,allImagesName:n},dataType:"json",success:function(a){a.status?(jQuery("#"+t).val(a.result),e.parent().remove()):alert("Sorry! There is some problem. please check function calling.")},error:function(e){alert("Sorry! There is some problem. please check function calling.")}}),jQuery(this).parent().remove()}))}!function(e){"use strict";var t="PageContent";removeEditorElement(),jQuery("#UseMagicEditor").on("click",(function(){"true"==jQuery(this).attr("use_editor")?(jQuery(".MagicEditorBox").addClass("d-none"),jQuery(".ClassicEditorBox").removeClass("d-none"),jQuery(this).html('<i class="fa fa-list"></i> Use Magic Editor').addClass("btn-primary").removeClass("light btn-dark"),jQuery(this).attr("use_editor",!1)):(jQuery(".ClassicEditorBox").addClass("d-none"),jQuery(".MagicEditorBox").removeClass("d-none"),jQuery(this).html('<i class="fa fa-list"></i> Use System Editor').addClass("light btn-dark").removeClass("light btn-primary"),jQuery(this).attr("use_editor",!0))}));let a=!1;jQuery(document).on("click",".ME-AddElement",(function(){var n=jQuery(this);if(!a&&!n.hasClass("disabled")){a=!0,n.addClass("disabled");var r=jQuery(this).data("element"),l=jQuery(this).data("element-type"),o=jQuery(this).data("element-image"),i=jQuery(this).data("element-name"),s=getEditorValue(t),u=""!=s?"<%ME%>["+r+"]":"["+r+"]";e.ajax({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},url:baseUrl+"/admin/magic_editors/add-element",type:"POST",data:{elementId:r,elementType:l,elementImage:o,elementName:i,oldElementId:s},dataType:"html",success:function(e){jQuery("#MagicEditorElementContainer").append(e),setEditorValue(t,s+u),jQuery("#AddElement").on("hidden.bs.modal",(function(){a=!1,n.removeClass("disabled"),jQuery("#AddElement").off("hidden.bs.modal")})),jQuery("#AddElement").modal("hide"),addRemoveAddElementBtn(),removeEditorElement()},complete:function(e){a=!1}})}})),jQuery(document).on("click",".Me-EditElement",(function(){if("widgets"==jQuery(this).data("element-type"))var t=baseUrl+"/admin/magic_editors/edit-section?type=widgets";else t=baseUrl+"/admin/magic_editors/edit-section";var a=jQuery(this).attr("elementId"),n=jQuery(this).attr("element-form-data"),r=serializedelementData=n?JSON.parse(n):"",l=jQuery(this).index(".Me-EditElement");e.ajax({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},url:t,type:"POST",data:{elementId:a,elementData:r,element_index:l},dataType:"html",success:function(e){jQuery("#AjaxResultContainerMd").html(e),jQuery("#AjaxModalBoxMd").modal("show"),addRemoveAddElementBtn(),removeEditorElement()}})})),jQuery(document).on("click",".ME-ElementFilter",(function(){jQuery("ul.nav-tabs li").removeClass("active"),jQuery(this).parent("li").addClass("active");var e=jQuery(this).data("element-filter");jQuery(".ME-ElementList li").removeClass("ME-Show"),"all"==e?jQuery(".ME-ElementList li").addClass("ME-Show"):jQuery("."+e).addClass("ME-Show")})),jQuery(document).on("click",".ME-ElementFormTabFilter",(function(){jQuery("ul.nav-tabs li").removeClass("active"),jQuery(this).parent("li").addClass("active");var e=jQuery(this).data("element-filter");jQuery(".ME-ElementFormTabSection").removeClass("ME-Show"),jQuery("."+e).addClass("ME-Show")})),jQuery(document).on("click",".ME-ElementFormTabFilter",(function(){jQuery("ul.nav-tabs li").removeClass("active"),jQuery(this).parent("li").addClass("active");var e=jQuery(this).data("element-filter");jQuery(".ME-ElementFormTabSection").removeClass("ME-Show"),jQuery("."+e).addClass("ME-Show")})),jQuery("a[data-bs-toggle|='modal'], button[data-bs-toggle|='modal']").on("click",(function(t){t.preventDefault();var a=jQuery(this).attr("href"),n=jQuery(this).data("bs-target");"undefined"!=n&&""!=n&&""!=a&&"#"!=a&&"undefined"!=a&&e.get(a,(function(t){e(n).modal("show"),jQuery(n).find(".modal-content").html(t)}))})),jQuery(document).on("change",".ContentType",(function(e){e.preventDefault();jQuery(this).val()}))}(jQuery);